<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="/css/project.css">
    <link rel="stylesheet" href="/css/index.css">
    <title>Homepage</title>
</head>

<body>
    <div class="heart-header">
        <div class="icon">
            <svg width="160" height="160" viewBox="0 0 151 160" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M131.374 29.7455C128.161 26.3389 124.345 23.6365 120.146 21.7927C115.947 19.949 111.445 19 106.9 19C102.354 19 97.853 19.949 93.6536 21.7927C89.4542 23.6365 85.6387 26.3389 82.4252 29.7455L75.756 36.8122L69.0869 29.7455C62.5958 22.8676 53.792 19.0036 44.6123 19.0036C35.4325 19.0036 26.6288 22.8676 20.1377 29.7455C13.6466 36.6235 10 45.9519 10 55.6788C10 65.4057 13.6466 74.7342 20.1377 81.6122L26.8069 88.6788L75.756 140.545L124.705 88.6788L131.374 81.6122C134.589 78.2071 137.14 74.1643 138.88 69.7145C140.62 65.2648 141.515 60.4954 141.515 55.6788C141.515 50.8623 140.62 46.0929 138.88 41.6431C137.14 37.1934 134.589 33.1505 131.374 29.7455Z" stroke="#F24C27" stroke-width="11" stroke-linecap="round" stroke-linejoin="round" />
            </svg>
        </div>

        <div class="value">
            <h1 id="heart-now">[XX] PONTOS</h1>
            <p id="updated"> os dados serão atualizados em [XX]s </p>
        </div>
    </div>

    <div class="today-stats">
        <div class="title">
            <h4>Seu progresso hoje</h4>
        </div>

        <div class="stats">
            <a href="(HISTORICO DE CORACAO)" class="history heart">
                <div class="stats-value heart">
                    <div class="stats icon">
                        <svg width="32" height="35" viewBox="0 0 32 35" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M27.7867 6.72292C27.1057 5.97772 26.2971 5.38657 25.4071 4.98325C24.5172 4.57993 23.5633 4.37234 22.6 4.37234C21.6367 4.37234 20.6828 4.57993 19.7929 4.98325C18.9029 5.38657 18.0943 5.97772 17.4133 6.72292L16 8.26876L14.5867 6.72292C13.2111 5.21837 11.3454 4.37312 9.4 4.37312C7.45462 4.37312 5.58892 5.21837 4.21333 6.72292C2.83774 8.22747 2.06494 10.2681 2.06494 12.3958C2.06494 14.5236 2.83774 16.5642 4.21333 18.0688L5.62666 19.6146L16 30.9604L26.3733 19.6146L27.7867 18.0688C28.468 17.3239 29.0085 16.4395 29.3772 15.4661C29.746 14.4928 29.9358 13.4495 29.9358 12.3958C29.9358 11.3422 29.746 10.2989 29.3772 9.32553C29.0085 8.35215 28.468 7.46778 27.7867 6.72292Z" stroke="#101010" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" />
                        </svg>

                    </div>
                    <div class="stats-text">
                        <span id="pontos_spam">[XX] PONTOS DE CORAÇÃO</span>
                    </div>
                </div>
            </a>

            <a href="(HISTORICO DE PASSOS)" class="history steps">
                <div class="stats-value steps">
                    <div class="stats icon">
                        <svg width="32" height="33" viewBox="0 0 32 33" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <g clip-path="url(#clip0_10_25)">
                                <path d="M0 26.4613C0 28.6539 1.72962 30.4375 3.85573 30.4375H27.8452C30.1361 30.4375 32 28.5154 32 26.1529V3.69255C32 3.06844 31.5093 2.56244 30.9041 2.56244H19.0966C18.8007 2.56244 18.5173 2.68577 18.3111 2.90444C18.1048 3.12322 17.9929 3.41866 18.001 3.72355C18.0276 4.72399 18.0801 7.52733 18.0044 8.47222C17.7972 11.0533 15.9988 13.4282 13.3109 14.6704C9.78791 16.2987 7.25538 17.3559 5.97948 17.6979C4.72113 18.0352 2.59254 18.5818 1.67704 19.233C0.548633 20.0357 0 21.2207 0 22.8558V26.4613ZM7.92383 24.2364V19.4556C7.92383 19.4457 7.92264 19.4361 7.92243 19.4263C8.29253 19.2902 8.7012 19.1321 9.14801 18.9519V19.4556C9.14801 20.0797 9.63868 20.5857 10.2439 20.5857C10.8491 20.5857 11.3397 20.0797 11.3397 19.4556V18.0264C11.6761 17.8792 12.0266 17.7238 12.3903 17.5609V18.5003C12.3903 19.1244 12.8809 19.6304 13.4861 19.6304C14.0913 19.6304 14.582 19.1244 14.582 18.5003V16.5509C14.727 16.4773 14.8696 16.4005 15.0103 16.3215C15.5714 17.621 16.4872 20.5363 15.5574 24.2365L7.92383 24.2364ZM29.7779 22.555C29.6192 23.5081 28.814 24.2364 27.8452 24.2364H17.8138C18.756 19.8202 17.5 16.411 16.8445 15.0317C17.1977 14.7244 17.5268 14.3969 17.8308 14.0523C18.1491 14.9212 18.6186 15.9497 19.3042 16.9871C20.9011 19.4039 24.0671 22.3313 29.7779 22.555ZM20.1783 8.76355H29.8083V20.2975C29.8046 20.2974 29.8011 20.2967 29.7974 20.2966C25.9797 20.1471 23.0748 18.6297 21.1636 15.7864C19.9646 14.0029 19.532 12.2135 19.414 11.6194C19.8246 10.7145 20.0866 9.75277 20.1783 8.76355ZM29.8083 4.82277V6.50333H20.2351C20.2333 5.91411 20.2255 5.31699 20.2169 4.82277H29.8083ZM5.73199 20.098V24.2364H2.19173V22.8558C2.19173 21.1001 3.15884 20.7653 5.73199 20.098ZM29.8083 25.9871C29.8083 27.1033 28.9276 28.1772 27.8452 28.1772H3.85573C2.94982 28.1772 2.21209 27.4264 2.19356 26.4967H27.8452C28.5548 26.4968 29.2232 26.312 29.8083 25.9871Z" fill="#101010" />
                                <path d="M24.9502 15.9284C26.6081 15.9284 27.9567 14.5377 27.9567 12.828C27.9567 11.1183 26.6081 9.72754 24.9502 9.72754C23.2923 9.72754 21.9436 11.1183 21.9436 12.828C21.9436 14.5377 23.2923 15.9284 24.9502 15.9284ZM24.9502 11.9878C25.3995 11.9878 25.765 12.3647 25.765 12.828C25.765 13.2913 25.3995 13.6682 24.9502 13.6682C24.5009 13.6682 24.1353 13.2913 24.1353 12.828C24.1353 12.3647 24.501 11.9878 24.9502 11.9878Z" fill="#101010" />
                            </g>
                            <defs>
                                <clipPath id="clip0_10_25">
                                    <rect width="32" height="33" fill="white" />
                                </clipPath>
                            </defs>
                        </svg>

                    </div>
                    <div class="stats-text">
                        <span id="passos_spam">VOCÊ DEU [XXXX] PASSOS</span>
                    </div>
                </div>
            </a>

            <a href="(HISTORICO DE CALORIAS)" class="history calories">
                <div class="stats-value calories">
                    <div class="stats icon">
                        <svg width="32" height="33" viewBox="0 0 32 33" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M18.2695 32.2846C18.0725 32.0366 17.9509 31.74 17.9187 31.4283C17.8864 31.1165 17.9448 30.8023 18.0871 30.5212C18.4604 29.8158 18.6067 29.0094 18.5113 28.2154C18.4331 27.6488 18.2406 27.1028 17.9449 26.6087C17.6531 26.1211 17.2627 25.696 16.7974 25.3589C15.2114 24.2 14.0986 22.5327 13.6559 20.6524C10.0329 25.2702 11.4223 27.8916 13.1574 30.2015C13.3609 30.4723 13.468 30.8002 13.4627 31.1355C13.4573 31.4708 13.3397 31.7952 13.1277 32.0598C12.9117 32.3274 12.6218 32.5298 12.292 32.6434C11.9659 32.7547 11.6136 32.7712 11.278 32.6909C8.93413 32.134 6.7281 31.0739 5.23266 29.3848C4.38496 28.4465 3.73233 27.3574 3.31086 26.1777C2.88459 24.9879 2.69526 23.7301 2.75299 22.4715C2.75299 22.4715 2.47087 17.3917 8.7708 12.4151C8.7708 12.4151 16.2162 6.27315 13.6326 1.73168C13.5374 1.50828 13.5092 1.26325 13.5512 1.02491C13.5932 0.786583 13.7038 0.564692 13.8701 0.384909C14.0318 0.208638 14.2453 0.084995 14.4817 0.0307582C14.7181 -0.0234787 14.966 -0.0056827 15.1916 0.081731L15.5013 0.201352C18.3057 1.92494 20.4975 4.44486 21.78 7.41987C23.0103 10.3341 23.0018 13.7309 22.1703 16.7565C22.8597 16.1543 23.4346 15.4345 23.8694 14.626L23.9309 14.494C24.3509 13.5102 25.6724 13.8237 26.1688 14.4672C26.3512 14.7498 31.0305 21.3619 28.5169 26.9408C27.5979 28.6311 26.2556 30.0689 24.6139 31.1213C23.2365 32.0101 21.6973 32.6352 20.0788 32.9631C19.7443 33.0316 19.3966 33.0044 19.0776 32.8847C18.7559 32.7631 18.4758 32.5558 18.2695 32.2866V32.2846ZM14.5235 16.278C14.7215 16.1777 14.951 16.1529 15.1668 16.2086C15.3827 16.2643 15.5693 16.3965 15.6901 16.5791C15.775 16.7008 15.8301 16.839 15.8492 16.9875L15.9447 17.7073C15.9871 18.7612 15.9744 19.8625 16.3965 20.8752C16.8334 21.9146 17.5122 22.8345 18.3734 23.5522C19.4829 24.262 20.3417 25.2857 20.834 26.485C21.3007 27.6482 21.3643 28.9393 21.0122 30.1417C22.0895 29.8113 23.0907 29.2811 23.9606 28.5804L24.1791 28.4072C24.8918 27.8359 25.4794 27.1223 25.9036 26.3097C26.33 25.4992 26.5866 24.6082 26.6545 23.6925C26.7924 21.5785 26.0521 19.4562 24.9003 17.5629C24.3743 18.3054 23.6488 18.8808 22.8109 19.2211C22.287 19.4377 21.7313 19.5717 21.1649 19.613C20.8405 19.6333 20.517 19.5616 20.2337 19.4067C19.946 19.2478 19.71 19.0134 19.5528 18.7302C19.4226 18.502 19.3482 18.2476 19.3354 17.9869C19.3225 17.7262 19.3715 17.4661 19.4786 17.2267C20.3525 15.2221 20.624 12.9987 20.2528 10.8394C19.8134 8.36886 18.5964 6.09176 16.7698 4.32209C16.4389 8.86976 11.6429 13.1039 10.6587 14.0155C10.5061 14.1553 10.3476 14.2888 10.1835 14.4156C5.03751 18.4683 5.38963 22.1601 5.38963 22.323C5.28743 23.7896 5.62569 25.2534 6.36325 26.5366C7.13748 27.8668 8.25111 28.964 9.58746 29.7127C8.04535 26.4169 8.04535 22.4612 13.7365 16.7895L14.5256 16.2739L14.5235 16.278Z" fill="#101010" />
                        </svg>

                    </div>
                    <div class="stats-text">
                        <span id="calorias_spam">VOCÊ QUEIMOU [XXXX] KCAL</span>
                    </div>
                </div>
            </a>

            <a href="(HISTORICO DE PESO)" class="history">
                <div class="stats-value weight">
                    <div class="stats icon">
                        <svg width="32" height="34" viewBox="0 0 32 34" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M3.89781 1L2 2.99814V31.013L3.76158 33H29.1993L31 31.013V2.98921L29.1993 1H3.89781ZM15.893 3.31219V6.28372H17.107V3.31219C18.8133 3.33451 20.5128 3.44837 22.1381 3.65674L21.3086 7.3107L22.4821 7.63814L23.3453 3.83163C25.1798 4.12707 26.886 4.54753 28.3698 5.09302L25.1326 13.4279C23.3723 12.9442 20.8905 12.654 18.2872 12.5647C18.5637 12.974 18.7256 13.48 18.7256 14.0233C18.7256 15.3702 17.7207 16.4791 16.5 16.4791C15.2793 16.4791 14.2744 15.3702 14.2744 14.0233C14.2744 13.48 14.4363 12.974 14.7128 12.5647C12.1028 12.654 9.62767 12.9442 7.86744 13.4279L4.63023 5.09302C6.11395 4.54753 7.82023 4.12707 9.65465 3.83163L10.5179 7.63814L11.6914 7.3107L10.8619 3.65674C12.4872 3.44837 14.1867 3.33451 15.893 3.31219ZM13.8226 4.82958L12.703 5.35647L15.2726 11.9767C15.6165 11.7312 16.0144 11.5823 16.446 11.5674L13.8226 4.82958ZM16.5 12.907C15.9335 12.907 15.4884 13.3981 15.4884 14.0233C15.4884 14.6484 15.9335 15.1395 16.5 15.1395C17.0665 15.1395 17.5116 14.6484 17.5116 14.0233C17.5116 13.3981 17.0665 12.907 16.5 12.907ZM7.86744 24.6651H25.1326V26.0047H7.86744V24.6651ZM7.86744 28.2372H25.1326V29.5767H7.86744V28.2372Z" fill="#101010" />
                        </svg>
                    </div>
                    <div class="stats-text">
                        <span id="peso_spam">VOCÊ ESTÁ PESANDO [XX] KG</span>
                    </div>
                </div>
            </a>
        </div>
    </div>
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>

    <script>
        const timetoupdate = 30;
        var caloriesExpendedData = [];
        var weightData = [];
        var heartMinutesData = [];
        var stepsCountData = [];
        var updatetext = timetoupdate;

        function carregarDados(url) {
            $.ajax({
                url: url,
                type: 'GET',
                dataType: 'json',
                success: function(data) {
                    var timer = $('#updated');
                    updatetext = timetoupdate;
                    timer.html("os dados serão atualizados em " + timetoupdate + " segundos");
                    exibirDados(data);
                },
                error: function(error) {
                    console.error('Erro ao carregar dados:', error);
                }
            });
        }



        function exibirDados(response) {
            var peso_spam = $('#peso_spam');
            var passos_spam = $('#passos_spam');
            var calorias_spam = $('#calorias_spam');
            var pontos_spam = $('#pontos_spam');
            var pontos_h1 = $('#heart-now');


            // Itera sobre cada tipo de dado (steps_count, calories_expended, weight, heart_minutes)
            for (var dataType in response) {
                if (response.hasOwnProperty(dataType)) {
                    var dataPoints = response[dataType];

                    // Verifica se dataPoints é uma matriz e não está vazio
                    if (Array.isArray(dataPoints) && dataPoints.length > 0) {
                        // Itera sobre cada ponto de dados
                        dataPoints.forEach(function(dataPoint) {
                            // Verifica se as propriedades essenciais estão presentes
                            if (dataPoint.hasOwnProperty('value') && dataPoint.hasOwnProperty('startTime') && dataPoint.hasOwnProperty('endTime')) {
                                // Adapte conforme necessário, dependendo da estrutura específica de cada tipo de dado
                                var value = dataPoint['value'];
                                var startTime = dataPoint['startTime'];
                                var endTime = dataPoint['endTime'];

                                // Adiciona os dados ao array apropriado
                                switch (dataType) {
                                    case 'steps_count':
                                        stepsCountData.push({
                                            value: value,
                                            startTime: startTime,
                                            endTime: endTime
                                        });
                                        break;
                                    case 'calories_expended':
                                        caloriesExpendedData.push({
                                            value: value,
                                            startTime: startTime,
                                            endTime: endTime
                                        });
                                        break;
                                    case 'weight':
                                        weightData.push({
                                            value: value,
                                            startTime: startTime,
                                            endTime: endTime
                                        });
                                        break;
                                    case 'heart_minutes':
                                        heartMinutesData.push({
                                            value: value,
                                            startTime: startTime,
                                            endTime: endTime
                                        });
                                        break;
                                    default:
                                        console.error('Tipo de dado desconhecido:', dataType);
                                }


                            } else {
                                console.error('Ponto de dados inválido para ' + dataType + ':', dataPoint);
                            }
                        });
                    } else {
                        console.error('Os dados para ' + dataType + ' não são uma matriz ou estão vazios.', response);
                    }
                }
            }

            // Agora você tem os dados armazenados nas variáveis stepsCountData, caloriesExpendedData, weightData e heartMinutesData
            if (Array.isArray(stepsCountData) && stepsCountData.length > 0) {
                passos_spam.html("VOCÊ DEU " + stepsCountData[stepsCountData.length - 1].value + " PASSOS");
            } else {
                peso_spam.html("NÃO FOI POSSÍVEL PEGAR SEUS PASSOS NO GOOGLE FIT :(");
            }

            if (Array.isArray(caloriesExpendedData) && caloriesExpendedData.length > 0) {
                calorias_spam.html("VOCÊ QUEIMOU " + caloriesExpendedData[caloriesExpendedData.length - 1].value + " KCAL");
            } else {
                peso_spam.html("NÃO FOI POSSÍVEL PEGAR SUAS CALORIAS GASTAS NO GOOGLE FIT :(");
            }

            if (Array.isArray(heartMinutesData) && heartMinutesData.length > 0) {
                pontos_spam.html(heartMinutesData[heartMinutesData.length - 1].value + " PONTOS DE CORAÇÃO");
                pontos_h1.html(heartMinutesData[heartMinutesData.length - 1].value + " PONTOS");
            } else {
                peso_spam.html("NÃO FOI POSSÍVEL PEGAR SEUS PONTOS DE CORAÇÃO NO GOOGLE FIT :(");
            }

            if (Array.isArray(weightData) && weightData.length > 0) {
                peso_spam.html("VOCÊ ESTÁ PESANDO" + weightData[weightData.length - 1].value + " QUILOS");
            } else {
                peso_spam.html("NÃO FOI POSSÍVEL PEGAR SEU PESO NO GOOGLE FIT :(");
            }

            console.log('Dados de steps_count:', stepsCountData[stepsCountData.length - 1].value);
            console.log('Dados de calories_expended:', caloriesExpendedData);
            console.log('Dados de weight:', weightData);
            console.log('Dados de heart_minutes:', heartMinutesData);

        }

        function timer() {
            var timer = $('#updated');
                updatetext = updatetext - 1;
                timer.html("os dados serão atualizados em " + updatetext + " segundos");
        }



        
        carregarDados("https://v1.nocodeapi.com/gabrielprisco/fit/fLzdQAHmJTPhNYui/aggregatesDatasets?dataTypeName=steps_count,calories_expended,weight,heart_minutes&timePeriod=7days");
        
        setInterval(() => {
            timer();
        }, 1000);
        setInterval(function() {
            carregarDados("https://v1.nocodeapi.com/gabrielprisco/fit/fLzdQAHmJTPhNYui/aggregatesDatasets?dataTypeName=steps_count,calories_expended,weight,heart_minutes&timePeriod=7days");
        }, timetoupdate * 1000);
    </script>
</body>

</html>